<html>
<head>
    <style type="text/css">
        .grid-container {
            display: grid;
            column-gap: 20px;
            grid-template-columns: auto auto auto;
        }
        .grid-item {
            width: 150px;
        }
        .grid-item div {
            width: 40%;
            float: left;
        }
        .grid-item input {
            width: 50%;
            float: left;
            }
        input {
            border: 1px #aaa solid;
            border-radius: 2px;
        }
        input:read-only {
            background-color: #eee;
        }
    </style>
</head>
<body>
    <div style="width: fit-content;">
        <div class="grid-container">
            <div class="grid-item"><div>Level:</div><input id="lvl" value="1" style="width: 50px;" oninput="Calculate()"></div>
            <div class="grid-item"><div>Stats:</div><input id="stats" value="30" style="width: 50px;" oninput="Calculate()"></div>
            <div class="grid-item"></div>
            <div class="grid-item"><div>Base:</div><input id="base" value="0" style="width: 60%" readonly></div>
            <div class="grid-item"><div>Relic:</div><input id="relicP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>Ship:</div><input id="shipP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>Buff:</div><input id="buffP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>RNK ↑:</div><input id="rnkP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>TAL:</div><input id="talP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>Ship:</div><input id="ship" value="0" style="width: 60%;" oninput="Calculate()"></div>
            <div class="grid-item"><div>Item:</div><input id="item" value="0" style="width: 60%;" oninput="Calculate()"></div>
            <div class="grid-item"><div>RNK ↑:</div><input id="rnk" value="0" style="width: 60%;" oninput="Calculate()"></div>
            <div class="grid-item"><div>PVP:</div><input id="pvp" value="0" style="width: 60%;" oninput="Calculate()"></div>
            <div class="grid-item"><div>Rank ↑:</div><input id="rankP" value="0" oninput="Calculate()">%</div>
            <div class="grid-item"><div>Rank ↑:</div><input id="rank" value="0" style="width: 60%;" oninput="Calculate()"></div>
        </div>
        <button onclick="Clear()">Clear</button>
        <br />
        <br />
        <div>Total PWR: <input id="totalPWR" value="0" style="width: 120px;" readonly></div>
        <br />
        <div>Add <input id="addLvl" value="1" style="width: 40px;" oninput="Calculate()"> Level: <input id="addLvlRes" value="0" style="width: 120px;" readonly></div>
        <div>XP Cost: <input id="lvlCost" value="0" style="width: 85px;" readonly></div>
        <br />
        <div>Add <input id="addStat" value="1" style="width: 40px;" oninput="Calculate()"> Stat: <input id="addStatRes" value="0" style="width: 120px;" readonly></div>
        <div>Add <input id="addP" value="1" style="width: 40px;" oninput="Calculate()"> %: <input id="addPRes" value="0" style="width: 120px;" readonly></div>
        <br />
        <div><input type="checkbox" id="shortNum" oninput="Calculate()" checked> Short Numbers</div>
    </div>
    <script>
        function Clear()
        {
            lvl.value = '1';
            stats.value = '30';
            relicP.value = '0';
            shipP.value = '0';
            buffP.value = '0';
            rnkP.value = '0';
            talP.value = '0';
            ship.value = '0';
            item.value = '0';
            rnk.value = '0';
            pvp.value = '0';
            rankP.value = '0';
            rank.value = '0';
            Calculate();
        }
        function Calculate()
        {
            let totalP = 1 + (ParseShortFloat(relicP.value) + ParseShortFloat(shipP.value) + ParseShortFloat(buffP.value) + ParseShortFloat(rnkP.value) + ParseShortFloat(talP.value) + ParseShortFloat(rankP.value)) / 100;
            let totalF = ParseShortFloat(ship.value) + ParseShortFloat(item.value) + ParseShortFloat(rnk.value) + ParseShortFloat(pvp.value) + ParseShortFloat(rank.value);
            let b = ParseShortFloat(stats.value) * GetLevelMult(ParseShortFloat(lvl.value));
            let tot = b * totalP + totalF;
            let short = shortNum.checked;
            base.value = ToNumString(b, short);
            totalPWR.value = ToNumString(tot, short);


            addPRes.value = ToNumString((b * (totalP + ParseShortFloat(addP.value) / 100) + totalF) - tot, short);

            b = (ParseShortFloat(stats.value) + ParseShortFloat(addStat.value)) * GetLevelMult(ParseShortFloat(lvl.value));
            addStatRes.value = ToNumString((b * totalP + totalF) - tot, short);

            b = ParseShortFloat(stats.value) * GetLevelMult((ParseShortFloat(lvl.value) + ParseShortFloat(addLvl.value)));
            addLvlRes.value = ToNumString((b * totalP + totalF) - tot, short);

            lvlCost.value = ToNumString(GetLevelCost(ParseShortFloat(lvl.value), ParseShortFloat(addLvl.value)), short);
        }
        function GetLevelCost(start, count)
        {
            const costs = [232, 237, 242, 248, 254, 260, 266, 272, 278, 284, 291, 298, 305, 312, 319, 326, 334, 342, 350, 358, 366, 375, 384, 393, 402, 411, 421, 431, 441, 451, 461, 472, 483, 494, 505, 517, 529, 541, 554, 567, 580, 593, 607, 621, 635, 650, 665, 680, 696, 712, 728, 745, 762, 779, 797, 815, 834, 853, 872, 892, 912, 933, 954, 976, 998, 1021, 1044, 1068, 1092, 1117, 1142, 1168, 1194, 1221, 1248, 1276, 1305, 1334, 1364, 1395, 1426, 1458, 1491, 1524, 1558, 1593, 1628, 1664, 1701, 1739, 1777, 1816, 1856, 1897, 1939, 1982, 2026, 2070, 2115, 2161, 2208, 2256, 2305, 2355, 2406, 2458, 2511, 2565, 2620, 2677, 2735, 2794, 2854, 2915, 2978, 3042, 3107, 3173, 3241, 3310, 3380, 3452, 3525, 3600, 3676, 3754, 3833, 3914, 3996, 4080, 4166, 4253, 4342, 4433, 4526, 4620, 4716, 4814, 4914, 5016, 5120, 5226, 5334, 5444, 5556, 5670, 5786, 5905, 6026, 6149, 6274, 6402, 6532, 6665, 6800, 5938, 7078, 7221, 7367, 7515, 7666, 7820, 7977, 8137, 8300, 8466, 8635, 8807, 8982, 9160, 9341, 9526, 9714, 9905, 10100, 10300, 10500, 10710, 10910, 11130, 11350, 11570, 11790, 12020, 12250, 12490, 12730, 12980, 13230, 13480, 13740, 14000, 14270, 14540, 14820, 15100, 15390, 15680, 15980, 16280, 16590, 16900, 17210, 17540, 17870, 18200, 18540, 18890, 19240, 19590, 19960, 20330, 20700, 21090, 21470, 21870, 22270, 22680, 23090, 23520, 23940, 24380, 24820, 25270, 25730, 26200, 26670, 27150, 27640, 28130, 28640, 29150, 29670, 30200, 30730, 31280, 31840, 32400, 32970, 33550, 34140, 34740, 35350, 35970, 36600, 37240, 37890, 38550, 39220, 39900, 40590, 41280, 42000, 42720, 43450, 44200, 44950, 45720, 46500, 47290, 48090, 48910, 49730, 50570, 51420, 52290, 53170, 54060, 54960, 55880, 56810, 57760, 58710, 59690, 60670, 61670, 62690, 63720, 64770, 65830, 66900, 67990, 69100, 70220, 71360, 72520, 73690, 74880, 76080, 77300, 78540, 79800, 81070, 82360, 83670, 85000, 86350, 87710, 89100, 90500, 91920, 93360, 94820, 96300, 97810, 99330, 100900, 102400, 104000, 105600, 107200, 108900, 110600, 112300, 114000, 115700, 117500, 119200, 121100, 122900, 124700, 126600, 128500, 130400, 132400, 134400, 136400, 138400, 140400, 142500, 144600, 146800, 148900, 151100, 153300, 155500, 157800, 160100, 162400, 164800, 167200, 169600, 172000, 174500, 177000, 179500, 182100, 184700, 187300, 189900, 192600, 195300, 198100, 200900, 203700, 206500, 209400, 212300, 215300, 218200, 221300, 224300, 227400, 230500, 233700, 236900, 240100, 243300, 246600, 250000, 253400, 256800, 260200, 263700, 267200, 270800, 274400, 278000, 281700, 285500, 289200, 293000, 296900, 300800, 304700, 308600, 312700, 316700, 320800, 324800, 329100, 333400, 337600, 341900, 346300, 350700, 355100, 359600, 364200, 369300, 374400, 379600, 384900, 390200, 395600, 401100, 406600, 412200, 417900, 423600, 429400, 435300, 441200, 447200, 453300, 459400, 465600, 471900, 478200, 484700, 491200, 497700, 504400, 511100, 517900, 524700, 531700, 538700, 545800, 552900, 560200, 567500, 574900, 582400, 590000, 597700, 605400, 613200, 621100, 629100, 637200, 645300, 653600, 661900, 670300, 678900, 687500, 696100, 704900, 713800, 722800, 731800, 740900, 750200, 759500, 768900, 778500, 788100, 797800, 807600, 817500, 827500, 837600, 847900, 858200, 868600, 879100, 889700, 900400, 911300, 922200, 933200, 944400, 955600, 966900, 978400, 990000, 1002000, 1013000, 1025000, 1037000, 1049000, 1062000, 1074000, 1087000, 1099000, 1112000, 1125000, 1137000, 1151000, 1164000, 1177000, 1190000, 1204000, 1217000, 1231000, 1245000, 1259000, 1273000, 1287000, 1304000, 1320000, 1336000, 1353000, 1370000, 1387000, 1404000, 1422000, 1439000, 1457000, 1475000, 1493000, 1411000, 1530000, 1548000, 1567000, 1586000, 1605000, 1625000, 1644000, 1664000, 1684000, 1704000, 1725000, 1745000, 1766000, 1787000, 1809000, 1830000, 1852000, 1873000, 1895000, 1918000, 1940000, 1963000, 1986000, 2009000, 2032000, 2056000, 2080000, 2104000, 2128000, 2152000, 2177000, 2202000, 2227000, 2252000, 2278000, 2304000];
            let cost = 0;
            for (let i = 0; i < count; i++)
                cost += costs[start - 1 + i];
            return cost;
        }
        function GetLevelMult(level)
        {
            const mults = [192.3216226005, 197.4156061259, 201.9972059813, 206.2917162519, 210.4310032597, 214.4771563098, 218.4094789672, 222.2590158845, 226.0671599317, 229.8028664563, 233.5178765458, 237.2121902002, 240.8444145496, 244.518031769, 248.1399079009, 251.7307393801, 255.3629637295, 258.9537952088, 262.5549749056, 266.1458063849, 269.7366378641, 273.3688622135, 276.9596936928, 280.5815698246, 284.213794174, 287.8460185233, 291.4782428727, 295.1415118746, 298.7737362239, 302.4783980959, 306.1416670978, 309.8463289698, 313.5509908418, 317.2970455839, 321.0327521084, 324.8098515031, 328.5869508977, 332.3640502923, 336.182542557, 340.0320794743, 343.8816163916, 347.7311533088, 351.6220830962, 355.5544057536, 359.4763801935, 363.4087028509, 367.3617219434, 371.3664821235, 375.360894086, 379.4070471361, 383.4325037512, 387.5097014539, 391.6282920267, 395.736534382, 399.8861696073, 404.0358048326, 408.2164847105, 412.4385574585, 416.6606302064, 420.9240958245, 425.1875614425, 429.4717234956, 433.8076266363, 438.143529777, 442.5104775702, 446.9291664511, 451.3271588969, 455.7768924303, 460.2576706162, 464.7384488022, 469.2502716407, 473.8034873493, 478.3670512754, 482.9513116366, 487.5873130853, 492.2129663166, 496.8800124179, 501.5884513892, 506.2968903606, 511.0363739846, 515.8069022611, 520.5877787551, 525.4307445543, 530.2530139184, 535.1477208051, 540.0320794743, 544.9578310136, 549.924975423, 554.8817716148, 559.8799606768, 564.9298908263, 570, 575.0699578164, 580.1896170070, 585.3293238107, 590.4798897381, 595.6697155744, 600.8896128304, 606.1095100864, 611.40946011, 616.68975952, 622.02978181, 627.37935977, 632.74964166, 638.15973881, 643.58974359, 649.02930403, 654.52938366, 660.02946329, 665.58926581, 671.15942029, 676.7494824, 682.37935977, 688.02994107, 693.71954133, 699.40993789, 705.15926103, 710.90938047, 716.71922281, 722.52986144, 728.37951903, 734.24988055, 740.15926103, 746.05988215, 752.02978181, 758.02994107, 764.02930403, 770.05972289, 776.15942029, 782.24956203, 788.37951903, 794.52938366, 800.68960025, 806.90953974, 813.15973881, 819.40993789, 825.71985985, 832.02978181, 838.37951903, 844.77942348, 851.18967989, 857.62939959, 864.05956362, 870.55980252, 877.0895047, 883.65981844, 890.21978022, 896.83946488, 903.46950151, 910.12996219, 916.83994959, 923.53969754, 930.29930687, 937.07939509, 943.88941399, 950.72936358, 957.58979206, 964.48960302, 971.42958412, 978.34987398, 985.34971645, 992.34955892, 999.40926276, 1006.45951481, 1013.56962823, 1020.67974165, 1027.839477, 1035.02993069, 1042.23928796, 1049.48960302, 1056.75960933, 1064.04930687, 1071.37996219, 1078.72952111, 1086.10979836, 1093.53969754, 1100.96959672, 1108.45935728, 1115.94990548, 1123.48928796, 1131.04993699, 1138.64996849, 1146.26969124, 1153.91934468, 1161.589477, 1169.29977946, 1177.02977316, 1184.7794581, 1192.58979206, 1200.40957782, 1208.26953371, 1216.15942029, 1224.04930687, 1231.99984247, 1239.96928166, 1247.96943919, 1255.99952741, 1264.04930687, 1272.15973535, 1280.26959638, 1288.39956366, 1296.59965716, 1304.78962132, 1313.01932367, 1321.2895434, 1329.59950132, 1337.8993299, 1346.25993455, 1354.63923952, 1363.06997039, 1371.49992208, 1379.97974131, 1388.47981923, 1396.99937666, 1405.5695808, 1414.13978495, 1422.75985663, 1431.42979585, 1440.09973508, 1448.8094125, 1457.54947795, 1466.30980209, 1475.09973508, 1483.92940626, 1492.78946548, 1501.66978339, 1510.59996883, 1519.51924575, 1528.49929874, 1537.5198691, 1546.54978962, 1555.61944834, 1564.68988624, 1573.82967119, 1582.97958548, 1592.16923796, 1601.37992832, 1610.61944834, 1619.87922705, 1629.18965249, 1638.51955743, 1647.8798504, 1657.25962288, 1666.6892629, 1676.13994078, 1685.61944834, 1695.11999377, 1704.66962755, 1714.23952002, 1723.82978723, 1783, 1793, 1802, 1811, 1821, 1830, 1839, 1849, 1858, 1867, 1877, 1886, 1895, 1905, 1914, 1923, 1933, 1942, 1951, 1961, 1970, 1979, 1989, 1998, 2007, 2017, 2026, 2035, 2045, 2054, 2063, 2073, 2082, 2091, 2101, 2110, 2119, 2129, 2138, 2147, 2157, 2166, 2175, 2185, 2194, 2203, 2213, 2222, 2231, 2241, 2311, 2322, 2332, 2343, 2354, 2365, 2375, 2386, 2397, 2408, 2418, 2429, 2440, 2451, 2461, 2472, 2483, 2493, 2504, 2515, 2526, 2536, 2547, 2558, 2569, 2579, 2590, 2601, 2612, 2622, 2633, 2644, 2654, 2665, 2676, 2687, 2697, 2708, 2719, 2730, 2740, 2751, 2762, 2773, 2783, 2794, 2805, 2815, 2826, 2837, 2917, 2929, 2941, 2953, 2965, 2978, 2990, 3002, 3014, 3026, 3038, 3051, 3063, 3075, 3087, 3099, 3111, 3124, 3136, 3148, 3160, 3172, 3184, 3197, 3209, 3221, 3233, 3245, 3257, 3270, 3282, 3294, 3306, 3318, 3330, 3343, 3355, 3367, 3379, 3391, 3403, 3416, 3428, 3440, 3452, 3464, 3476, 3489, 3501, 3513, 3602, 3616, 3630, 3643, 3657, 3671, 3684, 3698, 3711, 3725, 3739, 3752, 3766, 3780, 3793, 3807, 3821, 3834, 3848, 3862, 3875, 3889, 3902, 3916, 3930, 3943, 3957, 3971, 3984, 3998, 4012, 4025, 4039, 4053, 4066, 4080, 4093, 4107, 4121, 4134, 4148, 4162, 4175, 4189, 4203, 4216, 4230, 4244, 4257, 4271, 4370, 4385, 4400, 4416, 4431, 4446, 4461, 4476, 4491, 4507, 4522, 4537, 4552, 4567, 4582, 4598, 4613, 4628, 4643, 4658, 4673, 4688, 4704, 4719, 4734, 4749, 4764, 4779, 4795, 4810, 4825, 4840, 4855, 4870, 4886, 4901, 4916, 4931, 4946, 4961, 4976, 4992, 5007, 5022, 5037, 5052, 5067, 5083, 5098, 5113, 5222, 5239, 5256, 5273, 5289, 5306, 5323, 5340, 5356, 5373, 5390, 5406, 5423, 5440, 5457, 5473, 5490, 5507, 5523, 5540, 5557, 5574, 5590, 5607, 5624, 5640, 5657, 5674, 5691, 5707, 5724, 5741, 5757, 5774, 5791, 5808, 5824, 5841, 5858, 5874, 5891, 5908, 5925, 5941, 5958, 5975, 5991, 6008, 6025, 6042];
            return mults[level - 1];
        }
        function ToNumString(n, short)
        {
            if (short)
            {
                if      (n > 100000 * 1000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000 * 1000)).toFixed(1) + "T";
                else if (n > 10000 * 1000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000 * 1000)).toFixed(2) + "T";
                else if (n > 1000 * 1000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000 * 1000)).toFixed(3) + "T";
                else if (n > 100000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000)).toFixed(1) + "B";
                else if (n > 10000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000)).toFixed(2) + "B";
                else if (n > 1000 * 1000 * 1000)
                    return (n / (1000 * 1000 * 1000)).toFixed(3) + "B";
                else if (n > 100000 * 1000)
                    return (n / (1000 * 1000)).toFixed(1) + "M";
                else if (n > 10000 * 1000)
                    return (n / (1000 * 1000)).toFixed(2) + "M";
                else if (n > 1000 * 1000)
                    return (n / (1000 * 1000)).toFixed(3) + "M";
                else if (n > 100000)
                    return (n / 1000).toFixed(1) + "K";
                else if (n > 10000)
                    return (n / 1000).toFixed(2) + "K";
                else
                    return Math.round(n);
            }
            else
                return Math.round(n);
        }
        function ParseShortFloat(valStr)
        {
            valStr = valStr.trim();

            if (valStr == '')
                return 0;

            valStr = valStr.toUpperCase();

            let m = 1;
            let endChar = true;
            if (valStr.slice(-1) == 'K')
                m = 1000;
            else if (valStr.slice(-1) == 'M')
                m = 1000 * 1000;
            else if (valStr.slice(-1) == 'B')
                m = 1000 * 1000 * 1000;
            else if (valStr.slice(-1) == 'T')
                m = 1000 * 1000 * 1000 * 1000;
            else
                endChar = false;

            if (endChar)
                valStr = valStr.substr(0, valStr.length - 1);

            if (valStr == '')
                return 0;

            return parseFloat(valStr) * m;
        }
    </script>
</body>
</html>
